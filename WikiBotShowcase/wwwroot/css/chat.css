/* Header */
.topbar{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-bottom:1px solid #e5e5e5;background:#fff}
.brand{font-weight:700}
.toggles{display:flex;gap:.5rem;align-items:center}
.toggle{display:flex;gap:.4rem;align-items:center}
.toggle.pill{border:1px solid #ddd;border-radius:999px;padding:.15rem .5rem}
.tok{width:3.5rem}

/* Chat */
.chat-container{display:flex;flex-direction:column;max-width:900px;margin:1rem auto;height:calc(100vh - 7.5rem)}
.messages{flex:1;overflow:auto;padding:0 1rem}
.msg{display:flex;gap:.75rem;margin:.5rem 0}
.msg .role{font-size:.75rem;color:#666;width:64px;text-align:right;padding-top:.35rem}
.msg .bubble{flex:1;border:1px solid #eee;background:#fafafa;border-radius:.75rem;padding:.6rem .8rem}
.msg.you .bubble{background:#f0f7ff;border-color:#d6e9ff}
.sources{margin-top:.5rem;display:flex;flex-wrap:wrap;gap:.35rem}
.src-tag{font-size:.75rem;color:#555;border:1px solid #e0e0e0;border-radius:6px;padding:.1rem .35rem;background:#fff}
.spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(0,0,0,.15);border-top-color:rgba(0,0,0,.6);border-radius:50%;animation:spin 1s linear infinite;margin-right:.5rem}
@keyframes spin{to{transform:rotate(360deg)}}

/* Composer */
.composer{display:flex;gap:.5rem;padding:1rem;border-top:1px solid #eee}
.composer textarea{flex:1;resize:none;border:1px solid #ccc;border-radius:.6rem;padding:.6rem .75rem}

/* Drawer */
.drawer{position:fixed;right:-420px;top:0;height:100vh;width:420px;background:#fff;border-left:1px solid #e5e5e5;box-shadow:-6px 0 24px rgba(0,0,0,.08);transition:right .2s ease;z-index:7;padding:1rem}
.drawer.open{right:0}
.drawer-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}
.drawer-section{border-top:1px solid #eee;padding-top:.75rem;margin-top:.75rem}
.section-title{font-weight:600;margin-bottom:.35rem;display:flex;align-items:center;gap:.4rem}
.row{display:flex;gap:.5rem;align-items:center}
.hint{font-size:.8rem;color:#777;margin-top:.35rem}
.doc-list{margin-top:.5rem;display:flex;flex-direction:column;gap:.35rem;max-height:40vh;overflow:auto}
.doc-item{display:flex;align-items:center;gap:.5rem;border:1px solid #eee;border-radius:.5rem;padding:.35rem .5rem}
.doc-title{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.doc-meta{font-size:.8rem;color:#666}

/* Backdrop */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.2);z-index:6}

/* Buttons */
.btn{border:1px solid #d0d0d0;background:#fff;border-radius:.5rem;padding:.4rem .7rem;cursor:pointer}
.btn.primary{background:#0f62fe;color:#fff;border-color:#0f62fe}
.btn.secondary{background:#f4f4f4}
.btn.danger{background:#ffdada;border-color:#ffb7b7}
.btn.small{padding:.2rem .5rem}
.icon{border:none;background:transparent;font-size:1.1rem}
.muted{color:#888;font-size:.9rem}
